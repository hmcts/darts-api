java:
  applicationPort: 4550
  image: 'sdshmctspublic.azurecr.io/darts/api:latest'
  ingressHost: darts-api.{{ .Values.global.environment }}.platform.hmcts.net
  aadIdentityName: darts
#  Uncomment once the vault containing the app insights key has been set up
#  keyVaults:
#    darts:
#      secrets:
#        - name: AppInsightsInstrumentationKey
#          alias: azure.application-insights.instrumentation-key
  environment:
    ENABLE_FLYWAY: true
    RUN_DB_MIGRATION_ON_STARTUP: true
    DB_HOST: "{{ .Release.Name }}-postgresql"
    DB_NAME: postgres
    DB_USER: darts
    DB_PASS: darts
    DB_PORT: 5432
    DB_OPTIONS: '?sslmode=allow'
  #AZURE_APPLICATIONINSIGHTS_INSTRUMENTATIONKEY: '3c3bacb7-64e0-476c-aeaa-657657b063fd'
  #disableKeyVaults: true
    postgresql:
      enabled: true
      image:
        registry: hmctspublic.azurecr.io
        repository: imported/bitnami/postgresql
        tag: '11.6.0'
      primary:
        persistence:
          enabled: false
        resources:
          requests:
            cpu: 25m
        initdb:
          scripts:
            init.sql: |-
              CREATE DATABASE darts WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
      auth:
        username: darts
        password: darts

